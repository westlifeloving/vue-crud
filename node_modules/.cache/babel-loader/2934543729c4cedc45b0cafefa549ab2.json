{"ast":null,"code":"import { v4 as uuidv4 } from \"uuid\";\nexport default {\n  name: \"pushDialog\",\n  props: {\n    open: Boolean\n  },\n  data: function () {\n    return {\n      isEdit: true,\n      strategyTableData: [{\n        type: \"\",\n        field: \"\",\n        symbol: \"\"\n      }],\n      formLabelWidth: \"120px\",\n      form: {\n        id: \"\",\n        name: \"\",\n        condition: \"\",\n        type: \"\",\n        field: \"\",\n        syboml: \"\",\n        content: \"\",\n        action: \"\",\n        port: \"\",\n        priority: \"\"\n      },\n      ruleForm: {\n        id: \"\",\n        name: \"\",\n        condition: \"\",\n        action: \"\",\n        port: \"\",\n        priority: \"\"\n      },\n      type: [{\n        label: \"基础\",\n        value: 1\n      }, {\n        label: \"自定义\",\n        value: 2\n      }],\n      field: [{\n        label: \"Cokkie\",\n        value: 1\n      }, {\n        label: \"Referer\",\n        value: 2\n      }, {\n        label: \"HTTP-Method\",\n        value: 3\n      }, {\n        label: \"User-Agent\",\n        value: 4\n      }, {\n        label: \"X-Forwarded-For\",\n        value: 5\n      }, {\n        label: \"URI\",\n        value: 6\n      }],\n      symbol: [{\n        label: \"包含\",\n        value: 1\n      }, {\n        label: \"不包含\",\n        value: 2\n      }, {\n        label: \"等于\",\n        value: 3\n      }, {\n        label: \"不等于\",\n        value: 4\n      }, {\n        label: \"长度小于\",\n        value: 5\n      }, {\n        label: \"长度等于\",\n        value: 6\n      }],\n      rules: {\n        name: [{\n          required: true,\n          message: \"请输入策略名称\",\n          trigger: \"blur\"\n        }],\n        action: [{\n          required: true,\n          message: \"请选择匹配动作\",\n          trigger: \"change\"\n        }],\n        priority: [{\n          required: true,\n          message: \"请输入优先级\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    addStrategy(e) {\n      e.preventDefault();\n      const newStrategy = {\n        id: uuidv4(),\n        title: this.title,\n        completed: false\n      }; //Send up to parent\n\n      this.$emit(\"add-strategy\", newStrategy);\n      this.title = \"\";\n    },\n\n    handleChange(value) {\n      console.log(value);\n    },\n\n    close() {\n      let show = false;\n      this.$emit(\"update:open\", show);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAsJA;AACA;EACAA,kBADA;EAEAC;IACAC;EADA,CAFA;EAKAC;IACA;MACAC,YADA;MAEAC;QAAAC;QAAAC;QAAAC;MAAA,EAFA;MAGAC,uBAHA;MAIAC;QACAC,MADA;QAEAX,QAFA;QAGAY,aAHA;QAIAN,QAJA;QAKAC,SALA;QAMAM,UANA;QAOAC,WAPA;QAQAC,UARA;QASAC,QATA;QAUAC;MAVA,CAJA;MAgBAC;QACAP,MADA;QAEAX,QAFA;QAGAY,aAHA;QAIAG,UAJA;QAKAC,QALA;QAMAC;MANA,CAhBA;MAwBAX,OACA;QACAa,WADA;QAEAC;MAFA,CADA,EAKA;QACAD,YADA;QAEAC;MAFA,CALA,CAxBA;MAkCAb,QACA;QACAY,eADA;QAEAC;MAFA,CADA,EAKA;QACAD,gBADA;QAEAC;MAFA,CALA,EASA;QACAD,oBADA;QAEAC;MAFA,CATA,EAaA;QACAD,mBADA;QAEAC;MAFA,CAbA,EAiBA;QACAD,wBADA;QAEAC;MAFA,CAjBA,EAqBA;QACAD,YADA;QAEAC;MAFA,CArBA,CAlCA;MA4DAZ,SACA;QACAW,WADA;QAEAC;MAFA,CADA,EAKA;QACAD,YADA;QAEAC;MAFA,CALA,EASA;QACAD,WADA;QAEAC;MAFA,CATA,EAaA;QACAD,YADA;QAEAC;MAFA,CAbA,EAiBA;QACAD,aADA;QAEAC;MAFA,CAjBA,EAqBA;QACAD,aADA;QAEAC;MAFA,CArBA,CA5DA;MAsFAC;QACArB;UAAAsB;UAAAC;UAAAC;QAAA,EADA;QAEAT,SACA;UAAAO;UAAAC;UAAAC;QAAA,CADA,CAFA;QAKAP,WACA;UAAAK;UAAAC;UAAAC;QAAA,CADA;MALA;IAtFA;EAgGA,CAtGA;EAuGAC;IACAC;MACAC;MACA;QACAhB,YADA;QAEAiB,iBAFA;QAGAC;MAHA,EAFA,CAOA;;MACA;MACA;IACA,CAXA;;IAYAC;MACAC;IACA,CAdA;;IAeAC;MACA;MACA;IACA;;EAlBA;AAvGA","names":["name","props","open","data","isEdit","strategyTableData","type","field","symbol","formLabelWidth","form","id","condition","syboml","content","action","port","priority","ruleForm","label","value","rules","required","message","trigger","methods","addStrategy","e","title","completed","handleChange","console","close"],"sourceRoot":"src/components","sources":["pushDialog.vue"],"sourcesContent":["<template>\n  <div>\n    <el-dialog\n      style=\"width: 130%; margin-left: -10%\"\n      :visible.sync=\"open\"\n      :title=\"isEdit ? '添加策略' : '修改策略'\"\n      :append-to-body=\"true\"\n      :before-close=\"close\"\n    >\n      <el-divider></el-divider>\n      <el-form\n        :model=\"ruleForm\"\n        :rules=\"rules\"\n        ref=\"ruleForm\"\n        label-width=\"100px\"\n        class=\"demo-ruleForm\"\n      >\n        <el-form-item\n          label=\"策略名称\"\n          :label-width=\"formLabelWidth\"\n          prop=\"name\"\n        >\n          <el-input\n            class=\"addname\"\n            v-model=\"ruleForm.name\"\n            autocomplete=\"off\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item\n          label=\"匹配条件\"\n          :label-width=\"formLabelWidth\"\n          prop=\"condition\"\n        >\n          <el-table\n            :data=\"strategyTableData\"\n            :header-cell-style=\"{\n              background: 'rgb(64,158,255,0.1)',\n              height: '45px',\n            }\"\n            style=\"\n              margin: 15px 0;\n              width: 100%;\n              border: 1px solid #dcdfe6;\n              border-radius: 4px;\n            \"\n          >\n            <el-table-column label=\"类型\" width=\"150\" prop=\"type\">\n              <template slot-scope=\"scope\">\n                <el-select v-model=\"scope.row.type\" placeholder=\"基础\">\n                  <el-option\n                    v-for=\"item in type\"\n                    :key=\"item.label\"\n                    :label=\"item.label\"\n                    :value=\"item.label\"\n                  ></el-option>\n                </el-select> </template\n            ></el-table-column>\n            <el-table-column property=\"field\" label=\"匹配字段\" width=\"200\">\n              <template slot-scope=\"scope\">\n                <el-select v-model=\"scope.row.field\" placeholder=\"字段\">\n                  <el-option\n                    v-for=\"item in field\"\n                    :key=\"item.label\"\n                    :label=\"item.label\"\n                    :value=\"item.label\"\n                  ></el-option>\n                </el-select>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"symbol\" label=\"逻辑符\">\n              <template slot-scope=\"scope\">\n                <el-select v-model=\"scope.row.symbol\" placeholder=\"逻辑符\">\n                  <el-option\n                    v-for=\"item in symbol\"\n                    :key=\"item.label\"\n                    :label=\"item.label\"\n                    :value=\"item.label\"\n                  ></el-option>\n                </el-select>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"content\" label=\"匹配内容\">\n              <template slot-scope>\n                <el-input\n                  class=\"content\"\n                  v-model=\"form.content\"\n                  placeholder=\"只允许填写一个匹配项\"\n                ></el-input>\n              </template>\n            </el-table-column>\n          </el-table>\n          <p class=\"note\">\n            1、每条策略最多添加3个条件，且所有条件全部匹配上，该策略才生效。\n          </p>\n          <p class=\"note\">\n            2、自定义字段只允许使用字母、数字、横杠，不超过50个字符，且不能与可选字段重复。\n            <a href=\"http://help.yunaq.com/faq/1442/index.html\" target=\"_blank\"\n              >查看匹配字段说明</a\n            >\n          </p>\n        </el-form-item>\n        <el-form-item\n          label=\"匹配动作\"\n          :label-width=\"formLabelWidth\"\n          prop=\"action\"\n        >\n          <el-select v-model=\"ruleForm.action\" placeholder=\"阻断\">\n            <el-option label=\"阻断\" value=\"阻断\"></el-option>\n            <el-option label=\"放行\" value=\"放行\"></el-option>\n            <el-option label=\"记录\" value=\"记录\"></el-option>\n            <el-option label=\"JS挑战\" value=\"JS挑战\"></el-option>\n            <el-option label=\"验证码\" value=\"验证码\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item\n          label=\"优先级\"\n          :label-width=\"formLabelWidth\"\n          prop=\"priority\"\n        >\n          <el-input-number\n            v-model=\"ruleForm.priority\"\n            controls-position=\"right\"\n            @change=\"handleChange\"\n            :min=\"1\"\n            :max=\"100\"\n            placeholder=\"1\"\n          ></el-input-number>\n          <span class=\"note\">请填入数字1~100，数字越小代表优先级越高。</span>\n        </el-form-item>\n        <el-form-item\n          label=\"生效端口\"\n          :label-width=\"formLabelWidth\"\n          prop=\"port\"\n        >\n          <el-select v-model=\"ruleForm.port\" placeholder=\"\">\n            <el-option label=\"443\" value=\"443\"></el-option>\n            <el-option label=\"8080\" value=\"8080\"></el-option>\n          </el-select>\n          <span class=\"note\">不填写默认对所有端口生效</span>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"close\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"close\">确 定</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { v4 as uuidv4 } from \"uuid\";\nexport default {\n  name: \"pushDialog\",\n  props: {\n    open: Boolean,\n  },\n  data: function () {\n    return {\n      isEdit: true,\n      strategyTableData: [{ type: \"\", field: \"\", symbol: \"\" }],\n      formLabelWidth: \"120px\",\n      form: {\n        id: \"\",\n        name: \"\",\n        condition: \"\",\n        type: \"\",\n        field: \"\",\n        syboml: \"\",\n        content: \"\",\n        action: \"\",\n        port: \"\",\n        priority: \"\",\n      },\n      ruleForm: {\n        id: \"\",\n        name: \"\",\n        condition: \"\",\n        action: \"\",\n        port: \"\",\n        priority: \"\",\n      },\n      type: [\n        {\n          label: \"基础\",\n          value: 1,\n        },\n        {\n          label: \"自定义\",\n          value: 2,\n        },\n      ],\n      field: [\n        {\n          label: \"Cokkie\",\n          value: 1,\n        },\n        {\n          label: \"Referer\",\n          value: 2,\n        },\n        {\n          label: \"HTTP-Method\",\n          value: 3,\n        },\n        {\n          label: \"User-Agent\",\n          value: 4,\n        },\n        {\n          label: \"X-Forwarded-For\",\n          value: 5,\n        },\n        {\n          label: \"URI\",\n          value: 6,\n        },\n      ],\n      symbol: [\n        {\n          label: \"包含\",\n          value: 1,\n        },\n        {\n          label: \"不包含\",\n          value: 2,\n        },\n        {\n          label: \"等于\",\n          value: 3,\n        },\n        {\n          label: \"不等于\",\n          value: 4,\n        },\n        {\n          label: \"长度小于\",\n          value: 5,\n        },\n        {\n          label: \"长度等于\",\n          value: 6,\n        },\n      ],\n      rules: {\n        name: [{ required: true, message: \"请输入策略名称\", trigger: \"blur\" }],\n        action: [\n          { required: true, message: \"请选择匹配动作\", trigger: \"change\" },\n        ],\n        priority: [\n          { required: true, message: \"请输入优先级\", trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  methods: {\n    addStrategy(e) {\n      e.preventDefault();\n      const newStrategy = {\n        id: uuidv4(),\n        title: this.title,\n        completed: false,\n      };\n      //Send up to parent\n      this.$emit(\"add-strategy\", newStrategy);\n      this.title = \"\";\n    },\n    handleChange(value) {\n      console.log(value);\n    },\n    close() {\n      let show = false;\n      this.$emit(\"update:open\", show);\n    },\n  },\n};\n</script>\n\n<style scoped>\n</style>\n"]},"metadata":{},"sourceType":"module"}